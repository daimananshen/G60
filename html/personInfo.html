<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>修改个人信息</title>
        <link rel="stylesheet" type="text/css" href="../css/main.css"/>
        <script src="../js/jquery-3.3.1.min.js"></script>
        <script src="../js/API.js" type="text/javascript" charset="utf-8"></script>
    </head>
    <body>
        <!--<div class="header">
            <div class="container center">
                <span class="backBtn" style="    font-size: 13px;">
                    <img src="../images/back.png" width="10px"/>
                    返回
                </span>
                <span class="til">修改个人信息</span>
            </div>
        </div>-->
        <div>
            <br>
            <br>
            <input id="param">
            <br>
            <br>
            <hr>
        </div>

        <a onclick="submit()">完成</a>

    </body>
    <script>
        $(function(){
            var key = getQueryVariable("key");
            var value = getQueryVariable("value");
            $("#param").val(value);
        });

        function submit(){
            localStorage.setItem("yedao_id" , "123456");
            var dataid = localStorage.getItem("yedao_id");
            var key = getQueryVariable("key");
            var value = getQueryVariable("value");
            if(!isEmpty(key) && !isEmpty(value) && !isEmpty(dataid)){
                $.ajax({
                    url: ip + "personcentre/updateForMap",
                    type: 'post',
                    data: {
                        userId: dataid,
                        key:key,
                        value:value
                    },
                    dataType: "json",
                    success: function (data) {
                        alert("修改成功");
                    }, error: function (msg) {
                        console.log(msg)
                    }
                });
            }

        }

        function isEmpty(obj){
            if(typeof obj == "undefined" || obj == null || obj == ""){
                return true;
            }else{
                return false;
            }
        }

        function getQueryVariable(variable)
        {
            var query = window.location.search.substring(1);
            var vars = query.split("&");
            for (var i=0;i<vars.length;i++) {
                var pair = vars[i].split("=");
                if(pair[0] == variable){return pair[1];}
            }
            return;
        }
    </script>
</html>